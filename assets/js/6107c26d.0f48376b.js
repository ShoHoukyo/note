"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3782],{90930:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>V,contentTitle:()=>_,default:()=>q,frontMatter:()=>O,metadata:()=>K,toc:()=>W});var a=n(24246),o=n(71670);const r={dataInfo:{markDownText:"nearest library 1.6km near \u6b66\u8535\u5883\u99c5\nnearest pool 3.6km\n\u6b66\u8535\u5883\u99c5 about 1.5km\n",url:"https://www.ur-net.go.jp/chintai/kanto/tokyo/20_5970.html"},data:{address:"\u6771\u4eac\u90fd\u6b66\u8535\u91ce\u5e02\u685c\u58241-1",estimatedMonthlyGroceryCost:{data:59234},elementarySchool:{school:{data:{address:"\u3012180-0021 \u6771\u4eac\u90fd\u6b66\u8535\u91ce\u5e02\u685c\u5824\uff11\u4e01\u76ee\uff18\u221219",name:"\u685c\u91ce\u5c0f"}},walking:{approxDistance:500}},natureDanger:{earthQuake:1}}},i={dataInfo:{markDownText:"\u3012180-0012\n\u6b66\u8535\u91ce\u200b\u7dd1\u753a\u200b\u30d1\u30fc\u30af\u200b\u30bf\u30a6\u30f3\u200b\n\n\u6b66\u8535\u91ce\u30af\u30ea\u30fc\u30f3\u30bb\u30f3\u30bf\u30fc\n2019 \u53ef\u71c3\u3054\u307f\u30d4\u30c3\u30c8\u3067\u706b\u707d\u767a\u751f\u3002 \u21d2\u706b\u5143\u306f\u4e0d\u660e\u3002\n<ins> really safe? </ins>\nhttps://www.city.musashino.lg.jp/gomi_kankyo/gomi/cleancenter/unei/1004923.html\n\nNuro 2 options:\n- https://www.nuro.jp/mansion/ \n- https://www.nuro.jp/hikari/\n\n\u6b66\u8535\u91ce\u5e02\u7dd1\u753a2-3\t  B-5,B-6\u53f7\u68df (have bbeast)\nhttps://www.bb-east.ne.jp/bb-east/list.html  \n"},data:{address:"\u6771\u4eac\u90fd\u6b66\u8535\u91ce\u5e02\u7dd1\u753a2-3",estimatedMonthlyGroceryCost:{data:59234},elementarySchool:{school:{data:{address:"",name:"\u5927\u91ce\u7530"}},walking:{approxDistance:500}},natureDanger:{earthQuake:1}}},l=[{data:{landlord:"UR",monthlyRent:165600,monthlyFee:5200,initialNonRefundFee:0,securityDeposit:286e3,property:{data:{unit:"any 3rd floor",floor:3,builtYear:{data:2003},layout:{data:"2DK"},size:{data:50}}},location:{data:{address:"\u6771\u4eac\u90fd\u4e16\u7530\u8c37\u533a\u7389\u5ddd4",estimatedMonthlyGroceryCost:{data:61234},elementarySchool:{school:{data:{address:"",name:"\u4e8c\u5b50\u7389\u5ddd"}},walking:{approxDistance:50}},natureDanger:{earthQuake:1}}}}},{dataInfo:{markDownText:"2023\u5e741\u6708\u5ba4\u5185\u30ea\u30ce\u30d9\u30fc\u30b7\u30e7\u30f3\u6e08\u307f\nVDSL\u3001CATV\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3001\u5149\u914d\u7dda\n\nno one downstairs (water room)\n\nneighbors with NHK stickers\nMay still hear some noise\n"},data:{landlord:"UR",sourceUrl:"",monthlyRent:129800,monthlyFee:5730,initialNonRefundFee:0,securityDeposit:259600,discount:{data:[{minMonths:12,amount:129800}]},property:{data:{unit:"24 2F",floor:2,builtYear:{data:1999},layout:{data:"2DK"},size:{data:49}}},location:r}},{dataInfo:{markDownText:"2023\u5e741\u6708\u5ba4\u5185\u30ea\u30ce\u30d9\u30fc\u30b7\u30e7\u30f3\u6e08\u307f\uff08\u30ad\u30c3\u30c1\u30f3\u4ea4\u63db\u3001\u6d17\u9762\u5316\u7ca7\u53f0\u4ea4\u63db\u3001\u5e8a\u6539\u4fee\uff09\nVDSL\u3001CATV\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3001\u5149\u914d\u7dda"},data:{landlord:"UR",sourceUrl:"https://www.ur-net.go.jp/chintai/kanto/tokyo/20_5970_room.html?JKSS=000240305",monthlyRent:132500,monthlyFee:5730,initialNonRefundFee:0,securityDeposit:286e3,discount:{data:[{minMonths:12,amount:132500}]},property:{data:{unit:"24 305",floor:3,builtYear:{data:1999},layout:{data:"2DK"},size:{data:49}}},location:r}},{data:{landlord:"UR",sourceUrl:"https://www.ur-net.go.jp/chintai/kanto/tokyo/20_5970_room.html?JKSS=000130804",monthlyRent:147800,monthlyFee:5730,initialNonRefundFee:0,securityDeposit:286e3,discount:{data:[{minMonths:12,amount:147800}]},property:{data:{unit:"13 804",floor:8,builtYear:{data:2005},layout:{data:"1K"},size:{data:57}}},location:r}},{data:{landlord:"UR",monthlyRent:124500,monthlyFee:5730,initialNonRefundFee:0,securityDeposit:286e3,discount:{data:[{minMonths:12,amount:124500}]},property:{data:{unit:"23 1002",floor:10,builtYear:{data:2e3},layout:{data:"2DK"},size:{data:47}}},location:r}},{data:{landlord:"UR",monthlyRent:157100,monthlyFee:4700,discount:{data:[{minMonths:12,amount:157100}]},initialNonRefundFee:0,securityDeposit:316e3,property:{data:{unit:"A2 303",floor:3,builtYear:{data:1996},layout:{data:"2LDK"},size:{data:58}}},location:i}},{dataInfo:{markDownText:"2023/2/4 went\n"},data:{landlord:"UR",monthlyRent:143400,monthlyFee:4700,discount:{data:[{minMonths:12,amount:143400}]},initialNonRefundFee:0,securityDeposit:286e3,property:{data:{unit:"A5 602",floor:6,builtYear:{data:1996},layout:{data:"2DK E1"},size:{data:52}}},location:i}},{dataInfo:{markDownText:"\u4f4f\u68df\u5185LAN\n"},data:{sourceUrl:"https://www.ur-net.go.jp/chintai/kanto/tokyo/20_6601_room.html?JKSS=000030504",landlord:"UR",monthlyRent:120300,monthlyFee:6200,discount:{data:[{minMonths:12,amount:120300}]},initialNonRefundFee:0,securityDeposit:240600,property:{data:{unit:"3 504",floor:5,builtYear:{data:2004},layout:{data:"2DK"},size:{data:50}}},location:{dataInfo:{markDownText:"\u4eac\u738b\u4e95\u306e\u982d\u7dda\u300c\u4e09\u9df9\u53f0\u300d\u99c5 \n"},data:{address:"\u6771\u4eac\u90fd\u4e09\u9df9\u5e02\u725f\u793c2-14",estimatedMonthlyGroceryCost:{data:59234},elementarySchool:{school:{data:{address:"",name:"todo"}},walking:{approxDistance:500}}}}}},{dataInfo:{markDownText:"\u4f4f\u68df\u5185LAN\nbig balcony\n\nNo video door (strange)\nRakuten-mobile signal bad\nPerson with mental disability in neighbor units\n"},data:{sourceUrl:"",landlord:"UR",monthlyRent:154e3,monthlyFee:5e3,initialNonRefundFee:0,securityDeposit:300600,property:{data:{unit:"14 108",floor:1,builtYear:{data:2009,dataInfo:{markDownText:"meets 2007 standard"}},layout:{data:"1LDK"},size:{data:56}}},location:{dataInfo:{markDownText:"\u4e16\u7530\u8c37\u533a\u5357\u70cf\u5c712-30\nLibrary old, some homeless people\n",url:""},data:{address:"\u6771\u4eac\u90fd\u4e16\u7530\u8c37\u533a roka",estimatedMonthlyGroceryCost:{data:59934}}}}},{dataInfo:{markDownText:"VDSL\u3001CATV\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3001\u5149\u914d\u7dda\n\n"},data:{landlord:"UR",sourceUrl:"https://www.ur-net.go.jp/chintai/kanto/tokyo/20_5250_room.html?JKSS=000020207",monthlyRent:109e3,monthlyFee:9e3,initialNonRefundFee:0,securityDeposit:226e3,property:{data:{unit:"2 207",floor:2,builtYear:{data:1995},layout:{data:"2DK"},size:{data:47}}},location:{dataInfo:{markDownText:"\u3012\n\u30d1\u30fc\u30af\u30b5\u30a4\u30c9\u77f3\u795e\u4e95\n\u897f\u6b66\u6c60\u888b\u7dda\u300c\u5927\u6cc9\u5b66\u5712\u300d\u99c5\n",url:"https://www.ur-net.go.jp/chintai/kanto/tokyo/20_5250.html#list"},data:{address:"\u7df4\u99ac\u533a\u77f3\u795e\u4e95\u53f03-26",estimatedMonthlyGroceryCost:{data:59234},elementarySchool:{school:{data:{address:"",name:"todo"}},walking:{approxDistance:2500}}}}}},{data:{landlord:"JKK",monthlyRent:146400,monthlyFee:5300,initialNonRefundFee:0,securityDeposit:146e3,property:{data:{unit:"any",floor:2,builtYear:{data:2022},layout:{data:"2LDK"},size:{data:50}},dataInfo:{markDownText:"https://www.to-kousya.or.jp/chintai/campaign/reco/c_okura/index.html\n\u571f\u7802\u707d\u5bb3\u9632\u6b62\u6cd5\u306b\u57fa\u3065\u304d\u3001\u6577\u5730\u306e\u4e00\u90e8\u304c\u571f\u7802\u707d\u5bb3\u8b66\u6212\u533a\u57df\u306b\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e00\u62ec\u52a0\u5165\uff08Wi-Fi\uff09\n"}},location:{data:{address:"\u6771\u4eac\u90fd\u4e16\u7530\u8c37\u533a\u5927\u85353",estimatedMonthlyGroceryCost:{data:59234},elementarySchool:{school:{data:{address:"\u3012157-0067 \u6771\u4eac\u90fd\u4e16\u7530\u8c37\u533a\u559c\u591a\u898b\uff16\u4e01\u76ee\uff19\u22121",name:"\u533a\u7acb\u7827\u5c0f\u5b66\u6821"}},walking:{approxDistance:500}},natureDanger:{earthQuake:1},juniorHighSchool:{school:{data:{address:"\u3012157-0066 \u6771\u4eac\u90fd\u4e16\u7530\u8c37\u533a\u6210\u57ce\uff11\u4e01\u76ee\uff11\uff10\u22121",name:"\u533a\u7acb\u7827\u4e2d\u5b66\u6821"}},walking:{approxDistance:800}}}}}}];var s=n(27378),u=n(25773),d=n(30808),c=n(38944),m=n(50252),p=n(11652),h=n(93772),w=n(96206);const v=["className","component"];var y=n(70544),x=n(71608),f=n(92994);const g=(0,x.Z)(),T=function(t={}){const{themeId:e,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:r}=t,i=(0,m.ZP)("div",{shouldForwardProp:t=>"theme"!==t&&"sx"!==t&&"as"!==t})(p.Z);return s.forwardRef((function(t,l){const s=(0,w.Z)(n),m=(0,h.Z)(t),{className:p,component:y="div"}=m,x=(0,d.Z)(m,v);return(0,a.jsx)(i,(0,u.Z)({as:y,ref:l,className:(0,c.Z)(p,r?r(o):o),theme:e&&s[e]||s},x))}))}({themeId:f.Z,defaultTheme:g,defaultClassName:"MuiBox-root",generateClassName:y.Z.generate}),b=T;var P=n(61449),k=n(92133),I=n(23049),M=n(78196),j=n(54447),C=n(85705),D=n(58238),A=n(12222),S=n(70920),J=n(35491),R=n(1743),N=n(96242),Y=n(78660),F=n(33099);const{calcSafetyIndex:B}=N.model;function E(t){const e=(0,s.useMemo)((()=>t.propertiesList.map(Z)),[t.propertiesList]);return(0,a.jsxs)("div",{style:{outline:"1px dotted black"},children:[(0,a.jsx)("h5",{children:"Some representive properites"}),(0,a.jsx)(F.Z,{children:()=>(0,a.jsx)($,{rows:e})})]})}function U(t,e){let n=0;n+=(t.data.monthlyFee+t.data.monthlyRent)*e+t.data.initialNonRefundFee+e/120*t.data.securityDeposit;let a=t.data.location?.data?.estimatedMonthlyGroceryCost?.data;a??=6e4;const o=a*e,r=t?.data?.discount?.data??[];for(const i of r)e>=i.minMonths&&(n-=i.amount);return{rent:n,grocery:o}}function Z(t){return{...t,cost24months:U(t,24)}}const L=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",roundingIncrement:100});function z(t){const{row:e}=t,[n,o]=(0,s.useState)(!1);let r="inherit";const i=e.data.location?.data?.address;return i&&(r=`hsl(${(0,Y.Vl)(i)%360} 50% 80%)`),(0,a.jsxs)(s.Fragment,{children:[(0,a.jsxs)(A.Z,{sx:{"& > *":{borderBottom:"unset"},backgroundColor:r},children:[(0,a.jsx)(j.Z,{children:(0,a.jsx)(k.Z,{"aria-label":"expand row",size:"small",onClick:()=>o(!n),children:n?(0,a.jsx)(R.Z,{}):(0,a.jsx)(J.Z,{})})}),(0,a.jsxs)(j.Z,{component:"th",scope:"row",children:[L.format(e.cost24months.rent+e.cost24months.grocery)," /",L.format((e.cost24months.rent+e.cost24months.grocery)/24)," /",L.format((e.cost24months.rent+e.cost24months.grocery)/e.data.property.data.size.data)]}),(0,a.jsx)(j.Z,{align:"right",children:L.format(e.data.monthlyRent+e.data.monthlyFee)}),(0,a.jsxs)(j.Z,{align:"right",children:[e.data.property.data.layout.data,"/",e.data.property.data.size.data]}),(0,a.jsx)(j.Z,{align:"right",children:e.data?.property?.data?.builtYear?.data}),(0,a.jsx)(j.Z,{align:"right",children:(0,a.jsxs)("a",{href:`https://www.google.co.jp/search?q=${e.data.location?.data.address}`,target:"_blank",children:["\u2750",e.data.location?.data.address]})}),(0,a.jsx)(j.Z,{align:"right",children:(0,a.jsxs)("a",{href:e.data?.sourceUrl??`https://www.google.co.jp/search?q=${e.data.location?.data.address}`,target:"_blank",children:["\u2750",e.data.property?.data.unit]})}),(0,a.jsx)(j.Z,{align:"right",children:B(e.data.location)}),(0,a.jsx)(j.Z,{align:"right",children:e.data.location?.data?.elementarySchool?.school?.data?.name+" "+e.data.location?.data?.elementarySchool?.walking?.approxDistance+" m"})]}),(0,a.jsx)(A.Z,{children:(0,a.jsx)(j.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:996,children:(0,a.jsx)(P.Z,{in:n,timeout:"auto",unmountOnExit:!0,children:(0,a.jsx)(b,{sx:{margin:1},children:(0,a.jsxs)("small",{children:[(0,a.jsxs)("pre",{children:[e.dataInfo?.markDownText??"",e.data?.property?.dataInfo?.markDownText??"",e.data?.location?.dataInfo?.markDownText??""]}),(0,a.jsx)("pre",{children:JSON.stringify(e,null,1)})]})})})})})]})}function $(t){return(0,a.jsx)(C.Z,{component:S.Z,children:(0,a.jsxs)(I.Z,{"aria-label":"collapsible table",children:[(0,a.jsx)(D.Z,{children:(0,a.jsxs)(A.Z,{children:[(0,a.jsx)(j.Z,{}),(0,a.jsx)(j.Z,{children:"Living Cost (2years / per month / per \u33a1)"}),(0,a.jsx)(j.Z,{children:"Month Rent + fee"}),(0,a.jsx)(j.Z,{align:"right",children:"Layout / Size \u33a1"}),(0,a.jsx)(j.Z,{align:"right",children:"Year built"}),(0,a.jsx)(j.Z,{align:"right",children:"Address"}),(0,a.jsx)(j.Z,{align:"right",children:"Unit"}),(0,a.jsx)(j.Z,{align:"right",children:"Safe (high=good)"}),(0,a.jsx)(j.Z,{align:"right",children:"\u5c0f\u5b66\u6821"})]})}),(0,a.jsx)(M.Z,{children:t.rows.map(((t,e)=>(0,a.jsx)(z,{row:t},e)))})]})})}const O={},_=void 0,K={id:"my/public/housing/JP/rentalProperties",title:"rentalProperties",description:"",source:"@site/docs/my/public/housing/JP/rentalProperties.mdx",sourceDirName:"my/public/housing/JP",slug:"/my/public/housing/JP/rentalProperties",permalink:"/note/docs/my/public/housing/JP/rentalProperties",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"rent",permalink:"/note/docs/my/public/housing/JP/rent"},next:{title:"tokyo",permalink:"/note/docs/my/public/housing/JP/tokyo"}},V={},W=[];function G(t){return(0,a.jsx)(E,{propertiesList:l})}function q(t={}){const{wrapper:e}={...(0,o.a)(),...t.components};return e?(0,a.jsx)(e,{...t,children:(0,a.jsx)(G,{...t})}):G()}},93772:(t,e,n)=>{n.d(e,{Z:()=>u});var a=n(25773),o=n(30808),r=n(73143),i=n(86851);const l=["sx"],s=t=>{var e,n;const a={systemProps:{},otherProps:{}},o=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:i.Z;return Object.keys(t).forEach((e=>{o[e]?a.systemProps[e]=t[e]:a.otherProps[e]=t[e]})),a};function u(t){const{sx:e}=t,n=(0,o.Z)(t,l),{systemProps:i,otherProps:u}=s(n);let d;return d=Array.isArray(e)?[i,...e]:"function"==typeof e?(...t)=>{const n=e(...t);return(0,r.P)(n)?(0,a.Z)({},i,n):i}:(0,a.Z)({},i,e),(0,a.Z)({},u,{sx:d})}},78660:(t,e,n)=>{function a(t){return t.split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)|0),0)}n.d(e,{Kw:()=>r,Vl:()=>a,mE:()=>o,tO:()=>i});new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",roundingIncrement:100});const o=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",roundingIncrement:1}),r=new Intl.NumberFormat("ja-JP",{style:"decimal",maximumFractionDigits:0,roundingIncrement:1}),i=(new Intl.NumberFormat("ja-JP",{style:"decimal",maximumFractionDigits:6}),new Intl.NumberFormat("en-US",{notation:"scientific"}))},96242:(t,e,n)=>{n.d(e,{model:()=>i});var a={};n.r(a),n.d(a,{BatteryAAA:()=>I,EXAMPLE_BATTERY_OFFER:()=>M,batteryAAAOffers:()=>j});var o={};n.r(o),n.d(o,{battery:()=>a});var r={};n.r(r),n.d(r,{$S:()=>J});var i={};n.r(i),n.d(i,{qn:()=>l,calcSafetyIndex:()=>f,In:()=>r,I9:()=>o});class l{constructor(t){this.value=t}multiply(t){return new l(Object.assign(Object.assign({},this.value),{amountExclTax:void 0===this.value.amountExclTax?void 0:this.value.amountExclTax*t,amountInclTax:void 0===this.value.amountInclTax?void 0:this.value.amountInclTax*t}))}getJPYAmountExclTax(){var t,e;const n=this.value;let a;return a=void 0!==n.amountInclTax?100*n.amountInclTax/(100+(null!==(t=n.taxPercentage)&&void 0!==t?t:10)):null!==(e=n.amountExclTax)&&void 0!==e?e:0,"USD"===(null==n?void 0:n.currency)&&(a*=130),a}getJPYAmountInclTax(){var t,e;const n=this.value;let a;return a=void 0!==n.amountInclTax?n.amountInclTax:(null!==(t=n.amountExclTax)&&void 0!==t?t:0)*(100+(null!==(e=n.taxPercentage)&&void 0!==e?e:10))/100,"USD"===(null==n?void 0:n.currency)&&(a*=130),a}}class s{constructor(t){this.data=t}getTotal(t){var e;const n=null===(e=this.data.schedule)||void 0===e?void 0:e.repeatPeriod;if(n){if(n.unit===t.unit){const e=t.count/n.count;return{amount:this.data.pay.amount.multiply(e)}}throw new Error("todo   now not support")}return Object.assign({},this.data.pay)}}class u{constructor(t){this.data=t}getTotal(t){if(0===this.data.paySchedules.length)return{amount:d};if(this.data.paySchedules.length>1)throw new Error("todo  ");return this.data.paySchedules[0].getTotal(t)}}const d=new l({amountExclTax:0,taxPercentage:0,currency:"JPY"});class c{constructor(t){this.amountBased=t}calcAmountBased(t){let e=0;const n=Math.floor(t/this.amountBased.unit);for(const a of this.amountBased.schedule)n>=a.minUnitsIncl&&(e+=(1+Math.min(a.maxUnitsIncl,n)-a.minUnitsIncl)*this.amountBased.unit*a.percentage/100);return e}}class m{constructor(t){this.reward=t}getMoneyAmount(){var t,e;let n=this.reward.amount*(null!==(t=h.get(this.reward.pointName))&&void 0!==t?t:h.get("JP"));return null!=(null===(e=this.reward)||void 0===e?void 0:e.expiry)&&(n*=.5),new l({currency:"JPY",amountExclTax:n})}}class p{constructor(t){this.data=t}getRewardAmount(t){return new m({amount:t*this.data.percentage/100,pointName:this.data.pointType,expiry:this.data.expiry})}}const h=new Map([["JP-Suica",.99],["Rakuten",.95],["JP-T",.94],["amazon.co.jp",.9],["JP-d",.8],["Ponta",.85],["JPY",1],["JP",.4]]),w={unit:"month",count:1};class v{get total(){var t;return this.getSubTotal()*(null!==(t=this.multiplier)&&void 0!==t?t:1)}constructor(t){this.name=t.name,this.subTotal=t.subTotal,this.multiplier=t.multiplier,this.details=t.details}getSubTotal(){var t,e;let n=this.subTotal;if((null!==(e=null===(t=this.details)||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0)for(const a of this.details)n+=a.total;return n}addDetailsNumberBreakdown(t){let{recursive:e=!1}=t;return this}getTestView(){var t,e,n,a;const o={name:this.name,subTotal:this.getSubTotal(),multiplier:null!==(t=this.multiplier)&&void 0!==t?t:1};return(null!==(n=null===(e=this.details)||void 0===e?void 0:e.length)&&void 0!==n?n:0)>0&&(o.details=null===(a=this.details)||void 0===a?void 0:a.map((t=>t.getTestView()))),o}assertTotalEqualDetailsSum(t){let{recursive:e=!1}=t;var n,a;if(e&&(null!==(a=null===(n=this.details)||void 0===n?void 0:n.length)&&void 0!==a?a:0)>0)for(const r of this.details)r.assertTotalEqualDetailsSum({recursive:e});const o=this.sumDetailsNumberBreakdownForTest({recursive:!1});if(this.subTotal!==o)throw new Error(`mismatch this.subtotal ${this.subTotal} !== ${o}`);return!0}sumDetailsNumberBreakdownForTest(t){let{recursive:e=!1}=t;var n,a;let o=0;if((null!==(a=null===(n=this.details)||void 0===n?void 0:n.length)&&void 0!==a?a:0)>0){for(const t of this.details)o+=e?t.sumDetailsNumberBreakdownForTest({recursive:e}):t.total;return o}return this.subTotal}}const y=32768;function x(t){var e,n,a,o,r,i,l,s,u,d,c,m,p,h,x,f,g,T,b,P;const{serviceTier:k,usage:I}=t,M=new v({name:`tier ${null!==(e=k.name)&&void 0!==e?e:""}`,subTotal:0,details:[]}),j=null!==(a=null===(n=null==k?void 0:k.price)||void 0===n?void 0:n.getJPYAmountInclTax())&&void 0!==a?a:0;0!==j&&(null===(o=M.details)||void 0===o||o.push(new v({name:"base price",subTotal:j})));const C=I.data.patterns.find((t=>(null==t?void 0:t.period)===w));if(null==C)throw M.name="now only support monthly, none found",M.subTotal=y,new Error("now only support monthly, none found");const D=Object.assign({},C),A={data:{patterns:[D]}};if(!(null==D?void 0:D.internetMB)&&!(null==D?void 0:D.voiceCallMinutes))return M.addDetailsNumberBreakdown({recursive:!0}),{remainUsage:A,breakdown:M};for(const w of null!==(r=null==k?void 0:k.internet)&&void 0!==r?r:[]){if(D.internetMB<.05*C.internetMB){D.internetMB=0;break}const t=Math.min(D.internetMB,w.MB);D.internetMB-=t,null===(i=M.details)||void 0===i||i.push(new v({name:`${t} MB`,subTotal:null!==(s=null===(l=null==w?void 0:w.price)||void 0===l?void 0:l.getJPYAmountInclTax())&&void 0!==s?s:0}))}for(const w of null!==(u=null==k?void 0:k.voiceCallTiers)&&void 0!==u?u:[]){if(D.voiceCallMinutes<.05*C.voiceCallMinutes){D.voiceCallMinutes=0;break}if(!((null!==(c=null===(d=null==w?void 0:w.maxPurchase)||void 0===d?void 0:d.count)&&void 0!==c?c:1)<2)){null===(f=M.details)||void 0===f||f.push(new v({name:`${D.voiceCallMinutes} mins`,subTotal:60*D.voiceCallMinutes*(null!==(T=null===(g=null==w?void 0:w.price)||void 0===g?void 0:g.getJPYAmountInclTax())&&void 0!==T?T:0)/(null!==(b=null==w?void 0:w.durationSeconds)&&void 0!==b?b:30)})),D.voiceCallMinutes=0;break}{const t=Math.min(D.voiceCallMinutes,(null!==(m=null==w?void 0:w.durationSeconds)&&void 0!==m?m:0)/60);null===(p=M.details)||void 0===p||p.push(new v({name:`${t} mins`,subTotal:null!==(x=null===(h=null==w?void 0:w.price)||void 0===h?void 0:h.getJPYAmountInclTax())&&void 0!==x?x:0})),D.voiceCallMinutes-=t}}return k.exclusiveOfOtherTiers&&((null==D?void 0:D.internetMB)||(null==D?void 0:D.voiceCallMinutes))?{remainUsage:I,breakdown:new v({name:`tier ${null!==(P=k.name)&&void 0!==P?P:""} is exclusive and not cover all`,subTotal:0})}:(M.addDetailsNumberBreakdown({recursive:!0}),{remainUsage:A,breakdown:M})}function f(t){var e,n,a,o,r,i,l;return 5-(null!==(a=null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.natureDanger)||void 0===n?void 0:n.earthQuake)&&void 0!==a?a:3)+3*(5-(null!==(l=null===(i=null===(r=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.otherDanger)||void 0===r?void 0:r.crimeRating)||void 0===i?void 0:i.data)&&void 0!==l?l:3))}class g{constructor(t){this.product=t}toJSON(t){return this.product}getSummary(){var t,e;return`${null!==(t=this.product.brand)&&void 0!==t?t:""}  ${null!==(e=this.product.name)&&void 0!==e?e:""}`}getPerformance(){return new v({name:"default",subTotal:1})}}class T extends g{constructor(t){super(t),this.product=t}}class b{constructor(t){this.reviewSummary=t}getScore(){return void 0===this.reviewSummary.stars||0===this.reviewSummary.totalCount?1:this.reviewSummary.stars/2.5*Math.log10(Math.max(this.reviewSummary.totalCount,10))}}class P{constructor(t){this.offer=t}getSummaryList(){const t=[];this.offer.data.provider&&t.push(this.offer.data.provider.name);for(const e of this.offer.data.products){const n=e.product.getSummary();e.count>1?t.push(`${e.count} X ${n}`):t.push(n)}return t}getPerfPriceRatio(){var t,e,n,a,o,r,i,l;const s=new v({name:"root",subTotal:0,details:[]});for(const c of this.offer.data.products){const e=c.product.getPerformance();e.multiplier=c.count,null===(t=s.details)||void 0===t||t.push(e)}const u=null!==(a=null===(n=null===(e=this.offer.data)||void 0===e?void 0:e.price)||void 0===n?void 0:n.getJPYAmountInclTax())&&void 0!==a?a:1,d=new v({name:"root",subTotal:u});if(this.offer.data.bracketRewardSchedule){let t=0;t+=this.offer.data.bracketRewardSchedule.calcAmountBased(u),null===(o=s.details)||void 0===o||o.push(new v({name:`reward ${t} `,subTotal:t}))}return s.addDetailsNumberBreakdown({recursive:!0}),s.multiplier=Math.log2(null!==(l=null===(i=null===(r=this.offer.data)||void 0===r?void 0:r.review)||void 0===i?void 0:i.getScore())&&void 0!==l?l:2),{performance:s,cost:d,price:u,ratio:s.total/u}}}class k extends P{}class I extends g{constructor(t){super(t),this.product=t}getPerformance(){return new v({name:"batteryAAA",subTotal:this.product.capacityMah*Math.log2(this.product.useCount+1)/10})}}const M=new k({data:{price:new l({amountInclTax:1e3}),products:[{product:new I({capacityMah:1234,useCount:100}),count:12}],review:new b({stars:4,totalCount:10,reviewsSource:"amazon.co.jp"})}}),j=[new k({dataInfo:{url:"https://www.amazon.co.jp/dp/B08922RZMD"},data:{price:new l({amountInclTax:1199}),products:[{product:new I({brand:"EBL",capacityMah:1100,batteryType:"\u30cb\u30c3\u30b1\u30eb\u6c34\u7d20",warranty:{count:12,unit:"month"},useCount:600}),count:10}],review:new b({stars:4.1,totalCount:448,reviewsSource:"amazon.co.jp"})}}),new k({dataInfo:{url:"https://www.amazon.co.jp/dp/B00CWNMXQW"},data:{price:new l({amountInclTax:1564}),products:[{product:new I({name:"\u5145\u96fb\u5f0f \u53584\u5f62(\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9)",brand:"Amazon\u30d9\u30fc\u30b7\u30c3\u30af",capacityMah:800,batteryType:"\u30cb\u30c3\u30b1\u30eb\u6c34\u7d20",warranty:{count:12,unit:"month"},useCount:600}),count:8}],review:new b({stars:4.2,totalCount:177448,reviewsSource:"amazon.co.jp"})}}),new k({dataInfo:{url:"https://www.amazon.co.jp/dp/B07HDZBJNM"},data:{price:new l({amountInclTax:1199}),products:[{product:new I({name:"\u53584",brand:"POWEROWL SHENZHEN EPT",capacityMah:800,batteryType:"\u30cb\u30c3\u30b1\u30eb\u6c34\u7d20",useCount:600,cons:["for 1000mAh, need their charger"]}),count:8}],review:new b({stars:4,totalCount:3244,reviewsSource:"amazon.co.jp"})}}),new k({dataInfo:{url:"https://www.amazon.co.jp/dp/B0761VK5F8"},data:{price:new l({amountInclTax:1495}),products:[{product:new I({name:"\u53584 ",brand:"BONAI",capacityMah:1100,batteryType:"\u30cb\u30c3\u30b1\u30eb\u6c34\u7d20",useCount:600,workTemperature:{low:-20},cons:["need their charger"]}),count:16}],review:new b({stars:3.9,totalCount:1600,reviewsSource:"amazon.co.jp"})}}),new k({dataInfo:{url:"https://www.amazon.co.jp/dp/B00NTCHCU2"},data:{price:new l({amountInclTax:716}),products:[{product:new I({name:"\u53584\u5f62 \u30a2\u30eb\u30ab\u30ea",brand:"Amazon\u30d9\u30fc\u30b7\u30c3\u30af",capacityMah:800,batteryType:"alkaline",useCount:1,pros:["1.5V\u306e\u53584\u30a2\u30eb\u30ab\u30ea\u4e7e\u96fb\u6c60 \u4f7f\u7528\u63a8\u5968\u671f:10\u5e74"]}),count:20}],review:new b({stars:4.3,totalCount:639634,reviewsSource:"amazon.co.jp"})}})];new u({name:"1time pay",paySchedules:[new s({pay:{amount:new l({amountInclTax:1e7})},schedule:{maxCount:1}})]});class C extends g{constructor(t){super(t),this.product=t}}const D=new Map([["JP-Suica",new l({amountInclTax:12e5})],["unknown",new l({amountInclTax:1e5})]]);class A extends k{constructor(t){super(t),this.offer=t}getPerfPriceRatio(t){var e,n,a,o,r,i,l;const{yearSpend:s=D,useYears:u=3}=null!=t?t:{},d=new v({name:"cost",subTotal:10*u,details:[]}),c=new v({name:"yield",subTotal:0,details:[]});if(null!=(null==this?void 0:this.offer.oneTimePointRewards))for(const h of this.offer.oneTimePointRewards)null===(e=c.details)||void 0===e||e.push(new v({name:"1-time points to JPY",subTotal:h.getMoneyAmount().getJPYAmountExclTax()}));this.offer.card.product.insurancePolicies&&(null===(n=c.details)||void 0===n||n.push(new v({name:"todo  credit-card insurance",subTotal:10})));const m=this.offer.card.product.rewards;for(const[h,w]of s){const t=null!==(a=null==m?void 0:m.get(h))&&void 0!==a?a:null==m?void 0:m.get("unknown");if(t){const e=w.getJPYAmountInclTax(),n=new v({name:`reward JPY ${u} years x spending ${e} on ${h} at rate ${t.data.percentage}%`,subTotal:t.getRewardAmount(e).getMoneyAmount().getJPYAmountExclTax()*u});null===(o=c.details)||void 0===o||o.push(n)}}const p=null===(r=this.offer.card)||void 0===r?void 0:r.product.fee;if(p)for(const h of p)null===(i=d.details)||void 0===i||i.push(new v({name:"paying-fee hassle",subTotal:1e3*u})),null===(l=d.details)||void 0===l||l.push(new v({name:`fee ${h.data.name}`,subTotal:h.getTotal({unit:"month",count:12*u}).amount.getJPYAmountInclTax()}));return c.addDetailsNumberBreakdown({recursive:!0}),d.addDetailsNumberBreakdown({recursive:!0}),{performance:c,cost:d,price:d.total,ratio:c.total/d.total}}}const S=new Map([["unknown",new p({pointType:"JP-Suica",percentage:1})],["JP-Suica",new p({pointType:"JP-Suica",percentage:1.5})]]),J=(new A({data:{products:[],price:d},card:new C({cardNetwork:["JCB"],rewards:S,fee:[new u({name:"yearly fee",paySchedules:[new s({pay:{amount:new l({amountInclTax:500})},schedule:{repeatPeriod:{unit:"month",count:12}}})]})]}),oneTimePointRewards:[new m({pointName:"JPY",amount:100})]}),[new A({data:{products:[],price:d},card:new C({name:"\u30ea\u30af\u30eb\u30fc\u30c8\u30ab\u30fc\u30c9",cardNetwork:["JCB","Visa","MasterCard"],dataInfo:{markDownText:""},rewards:new Map([["unknown",new p({pointType:"Ponta",percentage:1.2})]])})}),new A({data:{products:[],price:d},card:new C({name:"P-one standard",url:"https://matsunosuke.jp/p-one-card-standard/",pros:["\u4f7f\u3063\u305f\u91d1\u984d\u304c\u81ea\u52d5\u7684\u306b1\uff05OFF","p3 \u76d7\u96e3\u3060\u3051\u3067\u306f\u306a\u304f\u3066\u7d1b\u5931\u3082\u88dc\u511f\u3055\u308c\u308b\u306e\u306f\u5927\u304d\u306a\u30e1\u30ea\u30c3\u30c8"],cons:["p1 \u30e2\u30d0\u30a4\u30ebSuica\u306b\u306f\u30c1\u30e3\u30fc\u30b8\u3067\u304d\u307e\u3059\u3002\u3057\u304b\u3057\u30011\uff05\u5272\u5f15\u306e\u7279\u5178\u306e\u5bfe\u8c61\u5916","p2 \u5bb6\u65cf\u30ab\u30fc\u30c9\u7ba1\u7406\u8cbb\u5165\u4f1a\u6b21\u5e74\u5ea6\u3088\u308a1\u679a\u306b\u3064\u304d\u5e74200\u5186(\u7a0e\u629c)\u304b\u304b\u308a","p3 \u5229\u7528\u9650\u5ea6\u984d\u304c50\u4e07\u5186\u306a\u3089\u6700\u5927\u306750\u4e07\u5186\u307e\u30671\uff05\u5272\u5f15\u3068\u306a\u308a\u307e\u3059\u3002","p4 \u6d77\u5916\u30fb\u56fd\u5185\u65c5\u884c\u50b7\u5bb3\u4fdd\u967a\u3001\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u4fdd\u967a\u306a\u3069\u306f\u3042\u308a\u307e\u305b\u3093"],cardNetwork:["JCB","Visa","MasterCard"],dataInfo:{markDownText:""},rewards:new Map([["unknown",new p({pointType:"JPY",percentage:1})]])})}),new A({data:{products:[],price:d},card:new C({name:"Saison  raikumi  2022",cardNetwork:["MasterCard"],dataInfo:{markDownText:"travel oversea insurance of 3E7 JPY"},rewards:new Map([["unknown",new p({pointType:"JPY",percentage:1})]])})}),new A({data:{products:[],price:d},card:new C({name:"P-one Wiz  2022",url:"https://matsunosuke.jp/p-one-wiz/",pros:["p2 \u5bb6\u65cf\u30ab\u30fc\u30c9\u306e\u5e74\u4f1a\u8cbb\u30fb\u7ba1\u7406\u8cbb\u306f\u3044\u305a\u308c\u3082\u7121\u6599\u3067\u3059\u3002","p4 \u76d7\u96e3\u3060\u3051\u3067\u306f\u306a\u304f\u3066\u7d1b\u5931\u3082\u88dc\u511f\u3055\u308c\u308b"],cons:["p1 \u5168\u984d\u6255\u3044\u304c\u5e0c\u671b\u306e\u5834\u5408\u306f\u3001\u30ab\u30fc\u30c9\u5165\u4f1a\u5f8c\u3001\u300c\u30cd\u30c3\u30c8\u30ab\u30a6\u30f3\u30bf\u30fc\u300d\u3068\u3044\u3046\u4f1a\u54e1\u30b5\u30a4\u30c8\u304b\u3089\u624b\u7d9a\u304d","p2 \u96fb\u5b50\u30de\u30cd\u30fc\u3078\u306e\u30c1\u30e3\u30fc\u30b8\u3067\u30821\uff05\u5272\u5f15\u306e\u7279\u5178\u306e\u5bfe\u8c61\u5916\u3067\u3059\u3002","p3 \u5229\u7528\u9650\u5ea6\u984d\u304c50\u4e07\u5186\u306a\u3089\u6700\u5927\u306750\u4e07\u5186\u307e\u30671\uff05\u5272\u5f15\u3068\u306a\u308a\u307e\u3059\u3002","p4 \u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u5229\u7528\u67a0\u306e\u4e0a\u9650\u306f200\u4e07\u5186","p4 \u65c5\u884c\u4fdd\u967a\u30fb\u4ed8\u5e2f\u30b5\u30fc\u30d3\u30b9\u304c\u306a\u3044"],cardNetwork:["JCB","Visa","MasterCard"],dataInfo:{markDownText:"hassle to remove repost-pay"},rewards:new Map([["unknown",new p({pointType:"JPY",percentage:1.2,dataInfo:{markDownText:"1% cash off, 0.3-0.4% points exchange to others (count as 0.2%)"}})]])})}),new A({data:{products:[],price:d},card:new C({name:"\u30d3\u30c3\u30af\u30ab\u30e1\u30e9Suica\u30ab\u30fc\u30c9",url:"https://www.jreast.co.jp/card/first/bic/",cardNetwork:["JCB","Visa"],pros:["\u30d3\u30c3\u30af\u30ab\u30e1\u30e9Suica\u30ab\u30fc\u30c9\u4ee5\u5916\u306e\u3001\u4ed6\u306eSuica\u30ab\u30fc\u30c9\u3078\u306e\u30aa\u30fc\u30c8\u30c1\u30e3\u30fc\u30b8\u30fb\u30e2\u30d0\u30a4\u30ebSuica\u30c1\u30e3\u30fc\u30b8\u3067\u3082\u30011.5%\u30dd\u30a4\u30f3\u30c8\u9084\u5143\u306e\u5bfe\u8c61\u3067\u3059\u3002"],cons:["1,000\u5186\uff08\u7a0e\u8fbc\uff09\u306b\u3064\u304d,\u5b9f\u8cea1\uff05\u76f8\u5f53\u306e\u30dd\u30a4\u30f3\u30c8\u9084\u5143\uff08\u30d3\u30c3\u30af\u30dd\u30a4\u30f3\u30c80.5\uff05\uff0bJRE POINT0.5\uff05\uff09\u3067\u666e\u6bb5\u306e\u3054\u5229\u7528","\u5bb6\u65cf\u4f1a\u54e1\uff08\u5bb6\u65cf\u30ab\u30fc\u30c9\uff09\u306e\u5236\u5ea6\u306f\u3042\u308a\u307e\u305b\u3093"],dataInfo:{markDownText:"\n\u5229\u7528\u4ed8\u5e2f \u65c5\u884c\u50b7\u5bb3\u4fdd\u967a\n\nVisa\u30d6\u30e9\u30f3\u30c9\u306e\u5834\u5408\u3001Pay\u30b5\u30fc\u30d3\u30b9\u3092\u5e45\u5e83\u304f\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002PayPay\u3001Kyash\u3001d\u6255\u3044\u3001\u697d\u5929\u30da\u30a4\u306a\u3069\u306e\u30b9\u30de\u30db\u6c7a\u6e08\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\nJCB\u30d6\u30e9\u30f3\u30c9\u306e\u5834\u5408\u306fd\u6255\u3044\u3092\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\nhttps://matsunosuke.jp/biccamera-suica-card/\n"},rewards:new Map([["unknown",new p({pointType:"JP-Suica",percentage:.7})],["JP-Suica",new p({pointType:"JP-Suica",percentage:1.5})]]),insurancePolicies:[new class extends T{constructor(t){super(t),this.product=t}}({coverages:[]})],fee:[new u({name:"yearly fee",paySchedules:[new s({pay:{amount:new l({amountExclTax:477})},schedule:{repeatPeriod:{unit:"month",count:12}}})]})]}),oneTimePointRewards:[new m({pointName:"JPY",amount:0})]}),new A({data:{products:[],price:d},card:new C({name:"JCB\u30ab\u30fc\u30c9 W",url:"https://www.jcb.co.jp/promotion/ordercard/w/?13235513150100",cardNetwork:["JCB"],dataInfo:{markDownText:"seems hassle to exchange point"},rewards:new Map([["unknown",new p({pointType:"JCB-OkiDoki",percentage:.2})]])})}),new A({data:{products:[],price:d},oneTimePointRewards:[new m({pointName:"Rakuten",amount:100})],card:new C({name:"Rakuten",url:"todo",cardNetwork:["MasterCard"],cons:["1\u56de\u306e\u30ab\u30fc\u30c9\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\uff08\u304a\u8cb7\u3044\u7269\u3054\u3068\uff09\u306e\u3054\u5229\u7528\u91d1\u984d\u306b\u5bfe\u3057\u3066100\u5186\u306b\u3064\u304d1\u30dd\u30a4\u30f3\u30c8"],dataInfo:{markDownText:"\n"},rewards:new Map([["unknown",new p({pointType:"Rakuten",percentage:1})],["Rakuten",new p({pointType:"Rakuten",percentage:1.5})]])})}),new A({data:{products:[],price:d},oneTimePointRewards:[new m({pointName:"amazon.co.jp",amount:9e3})],card:new C({name:"Amazon Mastercard",url:"https://www.amazon.co.jp/dp/B08P4CFBK6",cardNetwork:["MasterCard"],pros:["\u5bb6\u65cf\u30ab\u30fc\u30c9\u306f\u672c\u4f1a\u54e11\u540d\u3042\u305f\u308a3\u679a\u307e\u3067 \u5e74\u4f1a\u8cbb\u7121\u6599"],cons:["\u30dd\u30a4\u30f3\u30c8\u5bfe\u8c61\u5916\uff1a\u30ad\u30e3\u30c3\u30b7\u30f3\u30b0\u3054\u5229\u7528\u5206\u3001\u30ea\u30dc\u30fb\u5206\u5272\u6255\u3044\u624b\u6570\u6599\u3001\u5e74\u4f1a\u8cbb\u3001\u4e00\u90e8\u4fdd\u967a\u6599\u3001\u56fd\u6c11\u5e74\u91d1\u4fdd\u967a\u6599\u3001Edy\u30c1\u30e3\u30fc\u30b8\u30fbJR\u30e2\u30d0\u30a4\u30ebSuica\u30fbJR\u897f\u65e5\u672c\u30b9\u30de\u30fc\u30c8ICOCA\u30fbWAON\u30c1\u30e3\u30fc\u30b8\u30fbnanaco\u30af\u30ec\u30b8\u30c3\u30c8\u30c1\u30e3\u30fc\u30b8\u306a\u3069\u306e\u7279\u5b9a\u306e\u52a0\u76df\u5e97\u3067\u306e\u3054\u5229\u7528\u306f\u30dd\u30a4\u30f3\u30c8\u8a08\u7b97\u306e\u5bfe\u8c61\u3068\u306a\u308a\u307e\u305b\u3093\u3002"],dataInfo:{markDownText:"\u30ab\u30fc\u30c9\u3092Apple Pay\u30fb Google Pay \u306b\u8a2d\u5b9a\u3044\u305f\u3060\u304f\u3053\u3068\u3067\u3001iD\u306e\u5bfe\u5fdc\u5e97\u8217\u3067\u3054\u5229\u7528\u3044\u305f\u3060\u3051\u307e\u3059\u3002\nafter joining amazon-prime, it auto-upgrades to Amazon Prime Mastercard\n\n\u539f\u5247WEB\u660e\u7d30\u66f8\u30b5\u30fc\u30d3\u30b9\n\n\u5bb6\u65cf\u30ab\u30fc\u30c9\u3067\u306eAmazon.co.jp\u306e\u3054\u5229\u7528\u5206\u306e\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u5bb6\u65cf\u30ab\u30fc\u30c9\u3067\u304a\u8cb7\u7269\u3092\u3055\u308c\u305f\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u52a0\u7b97\u3055\u308c\u3002\n\u5bb6\u65cf\u30ab\u30fc\u30c9\u3067\u306eAmazon.co.jp\u4ee5\u5916\u3067\u306e\u3054\u5229\u7528\u5206\u306e\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u672c\u4f1a\u54e1\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u96c6\u7d04\u3055\u308c\u3066\u52a0\u7b97\u3055\u308c\u307e\u3059\u3002\n\u6700\u9ad82,000\u4e07\u5186\u306e\u6d77\u5916\u65c5\u884c\u50b7\u5bb3\u4fdd\u967a\u3002(\u4e8b\u524d\u306b\u65c5\u8cbb\u306a\u3069\u3092\u5f53\u8a72\u30ab\u30fc\u30c9\u3067\u6c7a\u6e08\u3044\u305f\u3060\u304f\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\n"},rewards:new Map([["unknown",new p({pointType:"amazon.co.jp",percentage:1})],["amazon.co.jp",new p({pointType:"amazon.co.jp",percentage:1.5})]])})})]);class R extends T{constructor(t){super(t),this.product=t}}class N extends P{constructor(t){super(t),this.offer=t}getPerfPriceRatio(t){var e,n,a,o,r,i,l,s,u,d,c,m,p,h,f,g,T,b,P,k,I,M,j,C,D,A,S,J;if(1!==(null===(e=this.offer.data.products)||void 0===e?void 0:e.length))throw new Error("now only support 1 plan");if(!t)throw new Error("make sure to pass in some params");const R=(null===(n=this.offer.data.products)||void 0===n?void 0:n[0]).product.product,{usage:N,useMonths:Y}=t,F=new v({name:`${null!==(a=null==R?void 0:R.name)&&void 0!==a?a:""} for ${Y} months`,subTotal:0,details:[]}),B=new v({name:`${null!==(o=null==R?void 0:R.name)&&void 0!==o?o:""} for ${Y} months`,subTotal:0,details:[]});(null!==(r=null==R?void 0:R.data.cellOneTimeFees)&&void 0!==r?r:[]).forEach((t=>{var e,n;null===(e=B.details)||void 0===e||e.push(new v({name:null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"cell 1-time fee",subTotal:t.price.getJPYAmountInclTax()}))})),(null!==(i=null==R?void 0:R.data.initFees)&&void 0!==i?i:[]).forEach((t=>{var e,n;null===(e=B.details)||void 0===e||e.push(new v({name:null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"1-time init fee",subTotal:t.price.getJPYAmountInclTax()}))}));const E=N.data.patterns.find((t=>(null==t?void 0:t.period)===w)),U=null===(s=null===(l=null==R?void 0:R.data)||void 0===l?void 0:l.fixedLocationInternetTiers)||void 0===s?void 0:s[0];for(const w of null!==(u=null==E?void 0:E.otherInternetUse)&&void 0!==u?u:[])(null!==(d=null==U?void 0:U.MB)&&void 0!==d?d:0)>=w.MB&&(null===(c=F.details)||void 0===c||c.push(new v({name:"1 month",subTotal:w.MB*(null!==(m=w.latencyMs)&&void 0!==m?m:20)/(null!==(p=null==U?void 0:U.latencyMs)&&void 0!==p?p:20),multiplier:Y})),null===(h=B.details)||void 0===h||h.push(new v({name:`1 month fixed internet use ${null!==(f=null==U?void 0:U.name)&&void 0!==f?f:""} ${w.MB} MB`,subTotal:null!==(T=null===(g=null==U?void 0:U.price)||void 0===g?void 0:g.getJPYAmountInclTax())&&void 0!==T?T:0,multiplier:Y})));const Z=null!==(P=null===(b=null==U?void 0:U.maxContract)||void 0===b?void 0:b.count)&&void 0!==P?P:99999,L=function(t){let{minContractMonths:e,useMonths:n,maxContractMonths:a}=t;if(n<e)return e-n;const o=n%a;return 0===o?0:e-o}({minContractMonths:null!==(I=null===(k=null==U?void 0:U.minContract)||void 0===k?void 0:k.count)&&void 0!==I?I:0,useMonths:Y,maxContractMonths:Z});L>0&&(null===(M=B.details)||void 0===M||M.push(new v({name:`break contract fee, ${L} months remain`,subTotal:null!==(C=null===(j=null==U?void 0:U.breakContractFee)||void 0===j?void 0:j.getJPYAmountInclTax())&&void 0!==C?C:0})));const z=null===(D=null==R?void 0:R.data)||void 0===D?void 0:D.cellServiceTiers;if(null!=z){let t,e=new v({name:"",subTotal:0,details:[]}),n=Object.assign({},N);for(const a of z){const{remainUsage:o,breakdown:r}=x({serviceTier:a,usage:n});if(null===(A=e.details)||void 0===A||A.push(r),n=o,t=n.data.patterns.find((t=>(null==t?void 0:t.period)===w)),!(null==t?void 0:t.internetMB)&&!(null==t?void 0:t.voiceCallMinutes))break}(null==t?void 0:t.internetMB)||(null==t?void 0:t.voiceCallMinutes)?e=new v({name:"plan unable to satify use",subTotal:y}):e.addDetailsNumberBreakdown({}),[...Array(Y).keys()].forEach((t=>{var n;null===(n=B.details)||void 0===n||n.push(new v({name:`month ${t+1}, ${e.name}`,subTotal:e.total,details:e.details}))}))}return null!=(null===(S=R.data)||void 0===S?void 0:S.mnpOutFee)&&(null===(J=B.details)||void 0===J||J.push(new v({name:"MNP out fee",subTotal:R.data.mnpOutFee.getJPYAmountInclTax()}))),B.addDetailsNumberBreakdown({recursive:!1}),F.addDetailsNumberBreakdown({recursive:!0}),{performance:F,cost:B,price:B.total,ratio:F.total/B.total}}}new N({data:{price:d,products:[{count:1,product:new R({dataInfo:{markDownText:""},data:{initFees:[{name:"\u65b0\u898f\u767b\u9332\u6599",price:new l({amountExclTax:3e3,taxPercentage:10,currency:"JPY"})}],providers:["Au dealer"],fixedLocationInternetTiers:[{name:"example internet",price:new l({amountInclTax:1e3,taxPercentage:10,currency:"JPY"}),billingCycle:w,url:"",MB:1/0,breakContractFee:new l({amountInclTax:1234,currency:"JPY"}),minContract:{unit:"month",count:12},latencyMs:30}],name:"example",url:""}})}]}}),new N({data:{price:d,products:[{count:1,product:new R({dataInfo:{markDownText:"\n        2023/04  got flyer-paper\n        https://peraichi.com/landing_pages/view/jgjq5\n\u3010UR\u4f4f\u5b85\u5411\u3051\u3011 au\u3072\u304b\u308aUR\u7279\u5225\u30d7\u30e9\u30f3\n\n\u304a\u4f4f\u3044\u306e\u5efa\u7269\u306b\u306f\u5951\u7d04\u671f\u9593\u306e\u306a\u3044\u3001au\u3072\u304b\u308a\u304c\u3054\u5229\u7528\u53ef\u80fd\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u5de5\u4e8b\u8cbb\u3082\u3042\u308a\u307e\u305b\u3093\u3002\n\u203b\u3054\u5951\u7d04\u306b\u3042\u305f\u308a\u65b0\u898f\u767b\u9332\u6599\u304c\u91d13,000\u5186\uff08\u7a0e\u8fbc3,300\u5186\uff09\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u26051:\u30d7\u30ed\u30d0\u30a4\u30c0\u306fau one net\u306b\u306a\u308a\u307e\u3059\u3002\n\u26052:\u300c\u53e3\u5ea7\u632f\u66ff\u30fb\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u5272\u5f15\u3010100\u5186\uff08\u7a0e\u8fbc110\u5186\uff09/\u6708 \u5272\u5f15)\u300d\u9069\u7528\u6642\u306e\u6599\u91d1\u3067\u3059\u3002 \u8acb\u6c42\u66f8\u3067\u306e\u7a93\u53e3\u304a\u652f\u6255\u3044\u306e\u5834\u5408\u3001\u5225\u9014\u7a93\u53e3\u652f\u6255\u624b\u6570\u6599400\u5186\uff08\u7a0e\u8fbc440\u5186\uff09\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\n\u73fe\u91d13,000\u5186\uff08\u4e0d\u8ab2\u7a0e\uff09\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u30d0\u30c3\u30af\uff01\n\u5f53\u793e\u9650\u5b9a\u7279\u5178:\n2023\u5e745\u670831\u65e5\uff08\u6c34\uff09\u307e\u3067\u306b\u304a\u7533\u8fbc\u306e\u65b9\n\u5f53\u7a93\u53e3\u3067au\u3072\u304b\u308a\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3092\u65b0\u898f\u3067\n\u304a\u7533\u8fbc\u307f\u3044\u305f\u3060\u304f\u3068\u3001\u73fe\u91d13,000\u5186\uff08\u4e0d\u8ab2\u7a0e\uff09\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u30d0\u30c3\u30af\uff01\uff01\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u958b\u901a\u5f8c\u3001\u767b\u9332\u4f4f\u6240\u5b9b\u306b\u90f5\u4fbf\u70ba\u66ff\u3092\u304a\u5c4a\u3051\u3044\u305f\u3057\u307e\u3059\u3002\n\n"},data:{initFees:[{name:"\u65b0\u898f\u767b\u9332\u6599",price:new l({amountExclTax:3e3,taxPercentage:10,currency:"JPY"})}],providers:["Au dealer"],fixedLocationInternetTiers:[{name:"UR  au one net VDSL",price:new l({amountExclTax:2750,taxPercentage:10,currency:"JPY"}),billingCycle:w,url:"https://peraichi.com/landing_pages/view/jgjq5",MB:1/0,breakContractFee:d,minContract:w,latencyMs:20}],name:"au VDSL",url:""}})}],name:"au VDSL",url:"https://peraichi.com/landing_pages/view/jgjq5"}}),new N({data:{price:d,products:[{count:1,product:new R({dataInfo:{markDownText:"\nUR\u9650\u5b9a\u7279\u5225\u30d7\u30e9\u30f3 \u30b9\u30de\u30fc\u30c8\u304a\u5f97NET320M\n\n"},data:{initFees:[{name:"\u65b0\u898f\u767b\u9332\u6599",price:new l({amountExclTax:3e3,taxPercentage:10,currency:"JPY"})}],cons:["p3 need to buy modem ? Wi-Fi\u6a19\u6e96\u88c5\u5099?"],providers:["JCom"],fixedLocationInternetTiers:[{name:"UR  \u30b9\u30de\u30fc\u30c8\u304a\u5f97NET320M",price:new l({amountExclTax:3380,taxPercentage:10,currency:"JPY"}),billingCycle:w,url:"",MB:1/0,breakContractFee:new l({amountInclTax:1100}),minContract:{unit:"month",count:24},maxContract:{unit:"month",count:24},latencyMs:20}],name:"JCom UR\u9650\u5b9a\u7279\u5225\u30d7\u30e9\u30f3 \u30b9\u30de\u30fc\u30c8\u304a\u5f97NET320M"}})}],name:"JCom UR\u9650\u5b9a\u7279\u5225\u30d7\u30e9\u30f3 \u30b9\u30de\u30fc\u30c8\u304a\u5f97NET320M",url:"https://www.jcom.co.jp/campaign/ur/"}});var Y=n(98784);const F=new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",roundingIncrement:1});class B extends T{constructor(t){super(t),this.product=t}getPerformance(t){var e,n,a,o,r,i,l,s,u,d,c,m,p;const{initialFund:h=1,holdMonths:w=12}=null!=t?t:{};let y=h;(null!==(n=null===(e=this.product.maxInvestAmount)||void 0===e?void 0:e.getJPYAmountInclTax())&&void 0!==n?n:h)<h&&(y=null!==(o=null===(a=this.product.maxInvestAmount)||void 0===a?void 0:a.getJPYAmountInclTax())&&void 0!==o?o:h);const x=new v({name:`Effective ${F.format(y)} / InitialFund ${F.format(h)} ${null!==(i=null===(r=this.product)||void 0===r?void 0:r.name)&&void 0!==i?i:""} ${this.product.nowAPY.taxType} for ${w} months`,subTotal:0,details:[]});let f=w,g=0;null===(s=null===(l=this.product.breakContract)||void 0===l?void 0:l.penalty)||void 0===s||s.forEach((function(t){var e;w>=t.maxMonthsExcl||w<(null!==(e=t.minMonths)&&void 0!==e?e:0)||(t.monthsInterest&&("ALL"===t.monthsInterest?f=0:f-=t.monthsInterest),t.initialFundPercentage&&(g+=t.initialFundPercentage))})),0!==g&&(null===(u=x.details)||void 0===u||u.push(new v({name:`penalty to initial fund (principal) -${g}% `,subTotal:-g/100})));let T=0;if(this.product.compounding){T=y*function(t){let{monthsIn1Period:e,apyPercentage:n,effectiveInterestAccrueMonths:a}=t;const o=(n*e/1200+1)**(a/e);return{multiplier:o,percentage:100*o-100}}({monthsIn1Period:null!==(d=this.product.monthsIn1Period)&&void 0!==d?d:1,apyPercentage:this.product.nowAPY.percentage,effectiveInterestAccrueMonths:f}).percentage/100}else T=y*(f/12)*this.product.nowAPY.percentage/100;null===(c=x.details)||void 0===c||c.push(new v({name:`interest for ${f} months at APY ${this.product.nowAPY.percentage}`,subTotal:T/h}));let b=0;return(null===(m=this.product)||void 0===m?void 0:m.bracketRewardSchedule)&&(b+=this.product.bracketRewardSchedule.calcAmountBased(h),null===(p=x.details)||void 0===p||p.push(new v({name:`reward ${b} `,subTotal:b/h}))),x.addDetailsNumberBreakdown({recursive:!0}),x}}class E{constructor(t){this.offer=t}getPerfPriceRatio(t){var e,n,a,o,r,i,l,s,u,d,c,m;const{initialFunds:p=[1,2,3,4,5],holdMonths:h=12}=null!=t?t:{};let w=0;const y=new v({name:"allocation",subTotal:0,details:[]}),x=new v({name:"Yield rate",subTotal:0,details:[]});for(const[T,b]of Y.zip(p,this.offer.data.products)){if(!b||!T)continue;const t=null==b?void 0:b.product.getPerformance({initialFund:T,holdMonths:h});t.multiplier=T*b.count,null===(e=x.details)||void 0===e||e.push(t),null===(n=y.details)||void 0===n||n.push(new v({name:null!==(a=null==b?void 0:b.product.product.name)&&void 0!==a?a:"",subTotal:T})),w+=T}null===(o=x.details)||void 0===o||o.forEach((t=>{t.multiplier/=w}));let f=0;this.offer.data.bracketRewardSchedule&&(f+=this.offer.data.bracketRewardSchedule.calcAmountBased(w),null===(r=x.details)||void 0===r||r.push(new v({name:`reward ${f} `,subTotal:f/w}))),x.addDetailsNumberBreakdown({recursive:!0}),x.multiplier=Math.log2(null!==(s=null===(l=null===(i=this.offer.data)||void 0===i?void 0:i.review)||void 0===l?void 0:l.getScore())&&void 0!==s?s:2);const g=null!==(m=null===(c=null===(d=null===(u=this.offer)||void 0===u?void 0:u.data)||void 0===d?void 0:d.price)||void 0===c?void 0:c.getJPYAmountInclTax())&&void 0!==m?m:1;return{performance:x,allocation:y,cost:new v({name:"root",subTotal:g}),price:g,ratio:x.total/g}}}new E({data:{bracketRewardSchedule:new c({unit:1e6,schedule:[{minUnitsIncl:1,maxUnitsIncl:1/0,percentage:.1},{minUnitsIncl:5,maxUnitsIncl:5,percentage:.2}]}),products:[{count:1,product:new B({name:"Demo \u500b\u4eba\u5411\u3051\u56fd\u50b5 10\u5e74\u50b5\uff08\u5909\u52d5\u91d1\u5229\u578b\uff09",nowAPY:{taxType:"pre-tax",percentage:.05},minAPY:{taxType:"pre-tax",percentage:.05},maxInvestAmount:new l({amountInclTax:4e6}),monthsIn1Period:120,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:12,monthsInterest:"ALL",initialFundPercentage:100},{minMonths:12,maxMonthsExcl:120,monthsInterest:12}]},bracketRewardSchedule:new c({unit:1e6,schedule:[{minUnitsIncl:1,maxUnitsIncl:1/0,percentage:.1},{minUnitsIncl:5,maxUnitsIncl:5,percentage:.2}]})})},{count:1,product:new B({name:"Demo \u500b\u4eba\u5411\u3051\u56fd\u50b5 5\u5e74\u50b5",nowAPY:{taxType:"pre-tax",percentage:.1},monthsIn1Period:60,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:60,monthsInterest:"ALL",initialFundPercentage:100}]},bracketRewardSchedule:new c({unit:1e3,schedule:[{minUnitsIncl:1,maxUnitsIncl:1/0,percentage:.1},{minUnitsIncl:5,maxUnitsIncl:5,percentage:.2}]})})},{count:1,product:new B({name:"Demo CD",nowAPY:{taxType:"pre-tax",percentage:12},minMonths:6,monthsIn1Period:6,maxInvestAmount:new l({amountInclTax:4e6}),compounding:!0,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:6,monthsInterest:"ALL",initialFundPercentage:0}]},bracketRewardSchedule:new c({unit:1e3,schedule:[{minUnitsIncl:1,maxUnitsIncl:1/0,percentage:.1}]})})}]}});const U=new B({name:"\u500b\u4eba\u5411\u3051\u56fd\u50b5 \u7b2c159\u56de10\u5e74\u50b5\uff08\u5909\u52d5\u91d1\u5229\u578b\uff09",nowAPY:{taxType:"pre-tax",percentage:.29},minAPY:{taxType:"pre-tax",percentage:.05},monthsIn1Period:120,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:12,monthsInterest:"ALL",initialFundPercentage:100},{minMonths:12,maxMonthsExcl:120,monthsInterest:12}]}});new E({dataInfo:{markDownText:"\n2023\u5e747\u6708\u306e\u9069\u7528\u91d1\u5229\n\u3000L\u666e\u901a\u9810\u91d1\u6b8b\u9ad8300\u4e07\u5186\u4ee5\u4e0b\u306e\u90e8\u5206\uff1a\u5e740.10\uff05\uff08\u7a0e\u5f15\u5f8c\u5e740.079\uff05\uff09\n\u3000L\u666e\u901a\u9810\u91d1\u6b8b\u9ad8300\u4e07\u5186\u3092\u8d85\u3048\u308b\u90e8\u5206\uff1a\u5e740.04\uff05\uff08\u7a0e\u5f15\u5f8c\u5e740.031\uff05\uff09\n"},data:{provider:{name:"\u697d\u5929\u9280\u884c"},products:[{count:1,product:new B({name:"nonCD under 3000k",url:"",nowAPY:{taxType:"pre-tax",percentage:.1},monthsIn1Period:1,maxInvestAmount:new l({amountExclTax:3e6,taxPercentage:0,currency:"JPY"}),compounding:!0,breakContract:{penalty:[]}})},{count:1,product:new B({name:"Rakuten bank CD 6 months",url:"",nowAPY:{taxType:"pre-tax",percentage:.13},monthsIn1Period:6,compounding:!1,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:6,monthsInterest:"ALL",initialFundPercentage:0}]}})},{count:1,product:new B({name:"Rakuten bank CD 1 year",url:"",nowAPY:{taxType:"pre-tax",percentage:.15},monthsIn1Period:12,compounding:!1,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:12,monthsInterest:"ALL",initialFundPercentage:0}]}})}]}}),new E({data:{provider:{name:"au\u3058\u3076\u3093\u9280\u884c"},url:"https://www.jibunbank.co.jp/interest_and_commission/interest/",products:[{count:1,product:new B({name:"au\u3058\u3076\u3093\u9280\u884c till 2023/07/31",url:"https://www.jibunbank.co.jp/campaign/2023/20230601_summer_yen_deposit/",nowAPY:{taxType:"pre-tax",percentage:.2},monthsIn1Period:12,compounding:!1,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:12,monthsInterest:"ALL",initialFundPercentage:0}]}})}]}}),new E({data:{provider:{name:"\u5927\u548c Daiwa"},bracketRewardSchedule:new c({unit:1e6,schedule:[{minUnitsIncl:1,maxUnitsIncl:1/0,percentage:.1},{minUnitsIncl:5,maxUnitsIncl:5,percentage:.2}]}),products:[{count:1,product:U},{count:1,product:new B({name:"\u500b\u4eba\u5411\u3051\u56fd\u50b5 5\u5e74\u50b5",nowAPY:{taxType:"pre-tax",percentage:.05},monthsIn1Period:60,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:60,monthsInterest:"ALL",initialFundPercentage:100}]}})}]}}),new E({data:{provider:{name:"\u91ce\u6751"},url:"https://www.nomura.co.jp/campaign/kojinmuke/",bracketRewardSchedule:new c({unit:1e6,schedule:[{minUnitsIncl:1,maxUnitsIncl:1/0,percentage:.1},{minUnitsIncl:5,maxUnitsIncl:5,percentage:.2}]}),products:[{count:1,product:U},{count:1,product:new B({name:"\u500b\u4eba\u5411\u3051\u56fd\u50b5 5\u5e74\u50b5",nowAPY:{taxType:"pre-tax",percentage:.06},monthsIn1Period:60,breakContract:{penalty:[{minMonths:0,maxMonthsExcl:12,monthsInterest:"ALL",initialFundPercentage:100},{minMonths:12,maxMonthsExcl:120,monthsInterest:12}]}})}]}})}}]);