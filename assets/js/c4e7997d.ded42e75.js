"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[8524],{98237:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>l,frontMatter:()=>o,metadata:()=>a,toc:()=>h});var r=n(24246),t=n(71670);const o={},i=void 0,a={id:"my/public/software/compression",title:"compression",description:"quick search as of 2014",source:"@site/docs/my/public/software/compression.md",sourceDirName:"my/public/software",slug:"/my/public/software/compression",permalink:"/note/docs/my/public/software/compression",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"import-dependency",permalink:"/note/docs/my/public/software/code/graph/import-dependency"},next:{title:"choose",permalink:"/note/docs/my/public/software/database/choose"}},c={},h=[];function p(e){const s={a:"a",br:"br",code:"code",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["quick search as of 2014",(0,r.jsx)(s.br,{}),"\nbest found info:",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://tukaani.org/lzma/benchmarks.html",children:"http://tukaani.org/lzma/benchmarks.html"}),(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://unix.stackexchange.com/questions/108100/why-are-tar-archive-formats-switching-to-xz-compression-to-replace-bzip2-and-wha",children:"http://unix.stackexchange.com/questions/108100/why-are-tar-archive-formats-switching-to-xz-compression-to-replace-bzip2-and-wha"}),(0,r.jsx)(s.br,{}),"\ngzip is very fast and has small memory footprint. According to this",(0,r.jsx)(s.br,{}),"\nbenchmark, neither bzip2 nor lzma can compete with gzip in terms of",(0,r.jsx)(s.br,{}),"\nspeed or memory usage.",(0,r.jsx)(s.br,{}),"\nand generally agrees that 6 is best in terms of speed/compression ratio"]}),"\n",(0,r.jsxs)(s.p,{children:["gzip is best for embedded use",(0,r.jsx)(s.br,{}),"\nto specify compression level  (consider not, default is pretty good)",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://superuser.com/questions/305128/how-to-specify-level-of-compression-when-using-tar-zcvf#305134",children:"http://superuser.com/questions/305128/how-to-specify-level-of-compression-when-using-tar-zcvf#305134"}),(0,r.jsx)(s.br,{}),"\nenv GZIP=-7 tar -czf"]}),"\n",(0,r.jsxs)(s.p,{children:["tar xz compression level",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://unix.stackexchange.com/questions/28976",children:"How to XZ a directory with TAR using maximum compression "}),(0,r.jsx)(s.br,{}),"\ntar -cf - foo/ | xz -9 -c - > foo.tar.xz",(0,r.jsx)(s.br,{}),"\nenv XZ_OPT=-9",(0,r.jsx)(s.br,{}),"\nand some deep tunings generally not worth it",(0,r.jsx)(s.br,{}),"\nmaybe don't bother, high level needs lots of memory"]}),"\n",(0,r.jsx)(s.p,{children:"xz sample cmd:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"tar --check-links -cJ --exclude-caches-all --ignore-case --strip-components=1  -f b.tar.xz \n"})}),"\n",(0,r.jsxs)(s.p,{children:["tar split   not easy, using cmd 'split' is easier",(0,r.jsx)(s.br,{}),"\nnon-standard option",(0,r.jsx)(s.br,{}),"\n-M    hassle, maybe not support compression",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://stackoverflow.com/questions/1120095",children:"linux Split Files using tar gz zip or bzip2 Stack Overf"}),(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://unix.stackexchange.com/questions/61774",children:"backup Create a tar archive split into blocks of a maximum"})]}),"\n",(0,r.jsxs)(s.p,{children:[".zip for compatibility with Windows systems",(0,r.jsx)(s.br,{}),"\n7z for best compression?"]}),"\n",(0,r.jsxs)(s.p,{children:["xz vs 7z",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"https://www.kernel.org/happy-new-year-and-good-bye-bzip2.html",children:"https://www.kernel.org/happy-new-year-and-good-bye-bzip2.html"}),(0,r.jsx)(s.br,{}),"\nuse xz"]}),"\n",(0,r.jsxs)(s.p,{children:["xz",(0,r.jsx)(s.br,{}),"\nThe 7z format does not store filesystem permissions (such as UNIX",(0,r.jsx)(s.br,{}),"\nowner/group permissions or NTFS ACLs), and hence can be",(0,r.jsx)(s.br,{}),"\ninappropriate for backup/archival purposes.",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/7z",children:"https://en.wikipedia.org/wiki/7z"}),(0,r.jsx)(s.br,{}),"\n7-Zip has supported xz",(0,r.jsx)(s.br,{}),"\nLinux kernel maintainers kernel.org announced that they would use xz",(0,r.jsx)(s.br,{}),"\ninstead of bzip2 as their compression tool from 2014 on",(0,r.jsx)(s.br,{}),"\nxz can be thought of as a stripped down version of the 7-Zip program",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://tukaani.org/lzma/benchmarks.html",children:"http://tukaani.org/lzma/benchmarks.html"}),(0,r.jsx)(s.br,{}),"\ndon't use extreme",(0,r.jsx)(s.br,{}),"\nseems to suggest level 4 is good enough (good compression, ok run time)",(0,r.jsx)(s.br,{}),"\nhigh levels does not bring significant better compression but lengthy run time",(0,r.jsx)(s.br,{}),"\nnow simply use default (6)",(0,r.jsx)(s.br,{}),"\nmemory shouldn't be a concern on laptop  (see man xz)",(0,r.jsx)(s.br,{}),"\nmulti threads not implemented yet",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://tukaani.org/xz/format.html",children:"http://tukaani.org/xz/format.html"}),(0,r.jsx)(s.br,{}),"\nJust like with .gz and .bz2 files, it is possible to concatenate .xz",(0,r.jsx)(s.br,{}),"\nfiles as is. The decompressor can decompress a concatenated file as",(0,r.jsx)(s.br,{}),"\nif it was a regular single-stream .xz file."]}),"\n",(0,r.jsxs)(s.p,{children:["7z",(0,r.jsx)(s.br,{}),"\ntar does not save the filesystem encoding, which means that tar",(0,r.jsx)(s.br,{}),"\ncompressed filenames can become unreadable if decompressed on a",(0,r.jsx)(s.br,{}),"\ndifferent computer",(0,r.jsx)(s.br,{}),"\na minor problem, use unicode, there shouldn't be problem (or stick with one encoding)"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"http://xahlee.info/linux/linux_gzip_bzip2_xz_7zip.html",children:"http://xahlee.info/linux/linux_gzip_bzip2_xz_7zip.html"})}),"\n",(0,r.jsxs)(s.p,{children:["there is open source password cracker for zip, rar, etc",(0,r.jsx)(s.br,{}),"\nnot sure about its safety though",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://rarcrack.sourceforge.net/",children:"http://rarcrack.sourceforge.net/"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"http://security.stackexchange.com/questions/5447/how-secure-is-a-windows-password-protected-zip-file",children:"http://security.stackexchange.com/questions/5447/how-secure-is-a-windows-password-protected-zip-file"}),(0,r.jsx)(s.br,{}),"\nself-decrypting archives, they are all wrong",(0,r.jsx)(s.br,{}),"\nfor compatibility",(0,r.jsx)(s.br,{}),"\npassword protected zip probably is not that safe",(0,r.jsx)(s.br,{}),"\ndepending on purpose, it might be just enough",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://xmodulo.com/how-to-create-encrypted-zip-file-on-linux.html",children:"http://xmodulo.com/how-to-create-encrypted-zip-file-on-linux.html"})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://www.gnu.org/software/tar/manual/tar.html",children:"https://www.gnu.org/software/tar/manual/tar.html"})}),"\n",(0,r.jsxs)(s.p,{children:["think out of box, inclusion/exclusion can also be done in 2 steps:",(0,r.jsx)(s.br,{}),"\ncopy needed only",(0,r.jsx)(s.br,{}),"\ncompress on copied"]}),"\n",(0,r.jsx)(s.p,{children:"exclude on size"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"tar cf small-archive.tar /big/tree --exclude-from <(find /big/tree -size +3M)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"http://serverfault.com/questions/232511/tar-avoid-archiving-of-files-larger-than-certain-size",children:"http://serverfault.com/questions/232511/tar-avoid-archiving-of-files-larger-than-certain-size"}),(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://ubuntuforums.org/archive/index.php/t-80790.html",children:"http://ubuntuforums.org/archive/index.php/t-80790.html"}),(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://askubuntu.com/questions/106167/how-to-archive-with-ignoring-files-larger-than-100mb",children:"http://askubuntu.com/questions/106167/how-to-archive-with-ignoring-files-larger-than-100mb"})]}),"\n",(0,r.jsxs)(s.p,{children:["7z exclude size",(0,r.jsx)(s.br,{}),"\nmaybe no switch for it"]}),"\n",(0,r.jsxs)(s.p,{children:["tar include pattern",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://stackoverflow.com/questions/5747755",children:"tar with include pattern Stack Overflow"})]}),"\n",(0,r.jsxs)(s.p,{children:["GNU tar has a -T or \u2013files-from option that can take a file",(0,r.jsx)(s.br,{}),"\ncontaining a list of patterns to include. The file specified with this",(0,r.jsx)(s.br,{}),'\noption can be "-" for stdin. So, you can pass an arbitrary list of',(0,r.jsx)(s.br,{}),"\nfiles for tar to archive from stdin using -files-from -. Your example becomes:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"find . -name '*.php' | tar -cvjf my.tar.bz2 --files-from -\n"})}),"\n",(0,r.jsxs)(s.p,{children:["gpg: WARNING: The GNOME keyring manager hijacked the GnuPG agent.",(0,r.jsx)(s.br,{}),"\ngpg: WARNING: GnuPG will not work properly - please configure that tool to not interfere with the GnuPG system!",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://wiki.gnupg.org/GnomeKeyring",children:"http://wiki.gnupg.org/GnomeKeyring"})]}),"\n",(0,r.jsxs)(s.p,{children:["linux open windows zip End-of-central-directory signature not found",(0,r.jsx)(s.br,{}),"\nit might be file corruption during transfer",(0,r.jsx)(s.br,{}),"\ntry: 7z e -tzip",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://askubuntu.com/questions/54904",children:"unzip error End of central directory signature not found "}),(0,r.jsx)(s.br,{}),"\njar xvf   sudo apt-get install fastjar",(0,r.jsx)(s.br,{}),"\ndd if=corrupt.zip | gunzip -f > xx.csv"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"http://danielwebb.us/software/backup/",children:"http://danielwebb.us/software/backup/"}),(0,r.jsx)(s.br,{}),"\ncompression always amplifies corruption loss",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://superuser.com/questions/162624/how-to-password-protect-gzip-files-on-the-command-line",children:"http://superuser.com/questions/162624/how-to-password-protect-gzip-files-on-the-command-line"})]}),"\n",(0,r.jsxs)(s.p,{children:["guide for CN average user:",(0,r.jsx)(s.br,{}),"\n.zip  \u901a\u7528\u7684\u89e3\u538b/\u538b\u7f29\u8f6f\u4ef6",(0,r.jsx)(s.br,{}),"\nWindows/macOS \u539f\u751f\u652f\u6301 zip, \u53ef\u4ee5\u76f4\u63a5\u5728\u8d44\u6e90\u7ba1\u7406\u5668\u91cc\u6d4f\u89c8",(0,r.jsx)(s.br,{}),"\n\u7ed9\u522b\u4eba\u6253\u5305\u53d1\u6587\u4ef6\u7528\u8fd9\u4e2a\u6700\u597d"]}),"\n",(0,r.jsxs)(s.p,{children:[".rar \u53ef\u4ee5\u4e0b\u8f7d\u5b98\u7f51\u5b89\u88c5\u5305\uff0c\u8bd5\u7528\uff0c\u4e70\u662f\u8981\u82b1\u94b1\u7684",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://www.win-rar.com/",children:"http://www.win-rar.com/"}),(0,r.jsx)(s.br,{}),"\nWinRAR\u53ef\u4ee5\u8bd5\u752840\u5929\uff0c\u8bd5\u7528\u671f\u7ed3\u675f\u540e\u4f1a\u8df3\u51fa\u63d0\u9192\u89c6\u7a97\uff0c\u4f46\u4ecd\u7136\u53ef\u4ee5\u538b\u7f29\u4e0e\u89e3\u538b\u7f29\u3002"]}),"\n",(0,r.jsxs)(s.p,{children:["\u6216\u8005\u75287Z(\u514d\u8d39)\u53ef\u4ee5\u89e3\u538b",(0,r.jsx)(s.br,{}),"\n",(0,r.jsx)(s.a,{href:"http://sparanoid.com/lab/7z/",children:"http://sparanoid.com/lab/7z/"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"http://www.zhihu.com/question/21272597",children:"http://www.zhihu.com/question/21272597"}),(0,r.jsx)(s.br,{}),"\n\u6709\u5174\u8da3\u770b\u770b\u8fd9\u4e2a"]})]})}function l(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},71670:(e,s,n)=>{n.d(s,{Z:()=>a,a:()=>i});var r=n(27378);const t={},o=r.createContext(t);function i(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);